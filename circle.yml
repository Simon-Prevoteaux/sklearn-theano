machine:
  environment:
    # We need to set this variable to let python see the package installed through apt-get
    PYTHONPATH: "/usr/lib/python2.7/dist-packages:/home/ubuntu/.local/lib/python2.7/site-packages/"
dependencies:
  cache_directories:
    - "~/sklearn_theano_data"
  # Various dependencies
  pre:
    - sudo apt-get update
    - sudo apt-get install libatlas-dev libatlas3gf-base
    - sudo apt-get install build-essential python-dev python-setuptools
    - sudo apt-get install python-numpy python-scipy python-dev python-matplotlib
    - sudo apt-get install python-nose python-coverage python-sklearn
    - sudo apt-get install python-sphinx python-pip
    - sudo pip install theano protobuf
  # The --user is needed to let sphinx see the source and the binaries
  # The pipefail is requested to propagate exit code
  override:
    - python setup.py install --user

general:
  # Open the doc to the API
  artifacts:
    - "doc/_build/html"
    - "~/log.txt"
  # Restrict the build to the branch master only
  #branches:
  #  only:
  #     - master
